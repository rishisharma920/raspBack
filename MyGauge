<!DOCTYPE html>
<html>
<body>
<div style="width:400px; margin-left: 100px">
<canvas id="canvas">Your browser does not support the HTML5 canvas tag.</canvas>
</div>
<script>
window.onload=function(){
var canvas = document.getElementById("canvas");
var ctx = canvas.getContext("2d");

var W=canvas.width;
var H=canvas.height;
var radians= 200*Math.PI/180;
var degrees=200;
var color="lightblue";
var bgcolor="#223";


var hh=canvas.height;
var ww=canvas.width;
var l=100;
var h=.8*hh;
var w=.6*ww;
var arcA=50*Math.PI/180;
var arcATop=20*Math.PI/180;

function init()
{
    
ctx.clearRect(0,0,W,H);
ctx.closePath();

//360 degree background 
ctx.beginPath();
ctx.fillStyle = color;
ctx.fillRect(.2*ww, hh-l-.2*hh,.6*ww,l);



ctx.beginPath();
//ctx.arc(0, l/2-w/2, 100, -250*Math.PI/180, -315/180* Math.PI+Math.PI,true);
ctx.fillStyle = color;
ctx.arc(ww/2,hh- .2*hh - w/2/Math.tan(arcA/2), w/2/Math.sin(arcA/2), 90*Math.PI/180-arcA/2,90*Math.PI/180+arcA/2,false);
ctx.fill();
ctx.closePath();


//for the tip arc
ctx.beginPath();
ctx.fillStyle = "white";
ctx.arc(ww/2,hh- .2*hh - w/2/Math.tan(arcATop/2)-l, w/2/Math.sin(arcATop/2), 90*Math.PI/180-arcATop/2,90*Math.PI/180+arcATop/2,false);
ctx.fill();
ctx.closePath();

}


function draw()
{
    new_l= Math.round(Math.random()*100);
    var difference=new_l-l;
    animation_loop=setInterval(animate_to,1000/difference);
        
 
    
}

draw();

setInterval(draw,1000);

function animate_to(){    // for smooth stansition
 if (l<new_l)
 {
     l++
 }
 else
 {
     l--;
 }
 
 if (l==new_l)
 {
        
    clearInterval(animation_loop);    // to avoid floickering at the end
 }
 
        init();
}

}

</script>

<style>
#canvas{
 display: block;
 background-color:white;
width:100%;
margin: auto auto;
   
}
</style>

</body>
</html>
